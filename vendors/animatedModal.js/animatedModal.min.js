!function(e){var o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,a,t){o.animatedModal=e(o,a)});else if("undefined"!=typeof exports){var n;require("underscore");try{n=require("jquery")}catch(e){}e(o,n)}else o.$animatedModal=e(o,o.jQuery||o.Zepto||o.ender||o.$)}(function(e,o){o.fn.animatedModal=function(e){function n(){o("body, html").css({overflow:"hidden"}),r==m&&(s.hasClass(l.modalTarget+"-off")&&(s.removeClass(l.animatedOut),s.removeClass(l.modalTarget+"-off"),s.addClass(l.modalTarget+"-on")),s.hasClass(l.modalTarget+"-on")&&(l.beforeOpen(s),s.css({opacity:l.opacityIn,"z-index":l.zIndexIn}),s.addClass(l.animatedIn),s.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",i)))}function a(){o("body, html").css({overflow:"auto"}),l.beforeClose(s),s.hasClass(l.modalTarget+"-on")&&(s.removeClass(l.modalTarget+"-on"),s.addClass(l.modalTarget+"-off")),s.hasClass(l.modalTarget+"-off")&&(s.removeClass(l.animatedIn),s.addClass(l.animatedOut),s.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",t))}function t(){s.css({"z-index":l.zIndexOut}),l.afterClose(s)}function i(){l.afterOpen(s)}var d=o(this),l=o.extend({modalTarget:"animatedModal",position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px",zIndexIn:"9999",zIndexOut:"-9999",color:"#39BEB9",opacityIn:"1",opacityOut:"0",animatedIn:"zoomIn",animatedOut:"zoomOut",animationDuration:".6s",overflow:"auto",beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}},e),f=o(".close-"+l.modalTarget);["beforeOpen","afterOpen","beforeClose","afterClose"].forEach(function(e){e in l&&(l[e]=l[e].bind(this))},this);var r=o(d).attr("href"),s=o("body").find("#"+l.modalTarget),m="#"+s.attr("id");s.addClass("animated"),s.addClass(l.modalTarget+"-off");var c={position:l.position,width:l.width,height:l.height,top:l.top,left:l.left,"background-color":l.color,"overflow-y":l.overflow,"z-index":l.zIndexOut,opacity:l.opacityOut,"-webkit-animation-duration":l.animationDuration};return s.css(c),d.click(function(e){e&&e.preventDefault&&e.preventDefault(),n()}),f.click(function(e){e&&e.preventDefault&&e.preventDefault(),a()}),{open:n,close:a}}});